<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="styles/converter.css" type="text/css"/>
    <link rel="stylesheet" href="styles/convert-table.css" type="text/css"/>
    <link rel="stylesheet" href="styles/main-page.css" type="text/css"/>

    <script src="./scripts/helper-func.js"></script>
    <script src="./scripts/bar-chart.js"></script>
    <script src="./scripts/addings-func.js"></script>
    <script src="./scripts/api-support.js"></script>
    <script src="./scripts/converters.js"></script>
    <script src="./scripts/addToHtml.js"></script>


    <script src="./scripts/d3.min.js"></script>

    <title>ConvertApp</title>

</head>
<body class="main-page">
<section class="main-page__header">
    <h1 class="main-page__title">
        Прогноз збереження
    </h1>
    <label for="percentage_checkbox"></label>
    <input type="checkbox" id="percentage_checkbox" name="subscribe" value="newsletter" onchange="addToPercentage()">
    <p>
        Ставки
    </p>
    <section class="main-page__currency-choose">
        <p> Валюта</p>
        <label for="currency-choose-box-id"></label>
        <select name="currency-choose-box" id="currency-choose-box-id" onchange="updateStatus()">
            <option value="EUR" selected>EUR</option>
            <option value="USD">USD</option>
            <option value="GBP">GBP</option>
            <option value="CAD">CAD</option>
        </select>
    </section>
</section>
<div class="converter">
    <div class="converter__for-button">
        <section class="convert-table">
            <section class="convert-table__input-fields">

                <h1 class="convert-table__title">
                    Збереження
                </h1>

                <section class="convert-table__input-section">
                    <img src="./img/euro-currency-symbol.svg" alt="EUR" class="convert-table__currency-img">
                    <label for="currency_1"></label>
                    <input type="text" name="txt" class="convert-table__input-exchange"
                           id="currency_1" value=0
                           onchange="addTo()">
                </section>

                <section class="convert-table__input-section">
                    <img src="./img/dollar-currency-sign.svg" alt="EUR" class="convert-table__currency-img">
                    <label for="currency_2"></label>
                    <input type="text" name="txt" class="convert-table__input-exchange"
                           id="currency_2" value=0
                           onchange="addTo()">
                </section>

                <section class="convert-table__input-section">
                    <img src="./img/pound-symbol-variant.svg" alt="EUR" class="convert-table__currency-img">
                    <label for="currency_3"></label>
                    <input type="text" name="txt" class="convert-table__input-exchange"
                           id="currency_3" value=0
                           onchange="addTo()">
                </section>

                <section class="convert-table__input-section">
                    <img src="./img/dollar-currency-symbol.svg" alt="EUR" class="convert-table__currency-img">
                    <label for="currency_4"></label>
                    <input type="text" name="txt" class="convert-table__input-exchange"
                           id="currency_4" value=0
                           onchange="addTo()"></section>
            </section>

            <section class="convert-table__converted-currency">
                <h1 class="convert-table__title" id="output-current-currency">
                    В моїй валюті,
                </h1>
                <output class="convert-table__output-exchange" id="currency_converted_1"></output>
                <output class="convert-table__output-exchange" id="currency_converted_2"></output>
                <output class="convert-table__output-exchange" id="currency_converted_3"></output>
                <output class="convert-table__output-exchange" id="currency_converted_4"></output>
            </section>

            <section class="convert-table__input-percentage">

                <h1 class="convert-table__title">
                    Ставки вкладів
                </h1>

                <label for="input_percentage_1"></label>
                <input type="text" class="convert-table__input-percentage-form" id="input_percentage_1" value=0
                       onchange="addToPercentage()" disabled>

                <label for="input_percentage_2"></label>
                <input type="text" class="convert-table__input-percentage-form" id="input_percentage_2" value=0
                       onchange="addToPercentage()" disabled>

                <label for="input_percentage_3"></label>
                <input type="text" class="convert-table__input-percentage-form" id="input_percentage_3" value=0
                       onchange="addToPercentage()" disabled>

                <label for="input_percentage_4"></label>
                <input type="text" class="convert-table__input-percentage-form" id="input_percentage_4" value=0
                       onchange="addToPercentage()" disabled>

            </section>

        </section>
    </div>


    <section class="convert-table__graph-1">
        <svg class="convert-table__line-graph" width="400" height="200"></svg>
        <script src="scripts/line-chart.js"></script>

    </section>
    <section class="convert-table__graph-2">
        <svg class="convert-table__bar-chart" width="500" height="200"></svg>
        <script></script>

    </section>
</div>

<script>

    let supportedCurrencies = ["EUR", "USD", "GBP", "CAD"];

    //Write new currency here when you want to add one
    let hiddenCurrencies = ["PLN", "RON"];

    const supportedCurrenciesAll = supportedCurrencies.concat(hiddenCurrencies);

    let interestedMonth = [1, 3, 6, 9, 12];
    let currentDate = 0;

    const baseCurrency = "EUR";
    let lastCurrencies = [];
    let currencyHistory = [];

    const colorsForCurr = ["#999900", "#4355CC", "#A7CC52", "#3ACCBC", "#18AECC", "#940ECC"];

    let valueCurrencyArray = [];
    let valuePercentageArray = [];

    for (let i = 0; i < supportedCurrencies.length; i++) {
        valueCurrencyArray.push(0);
        valuePercentageArray.push(0);
    }

    let chooseBox = document.getElementById("currency-choose-box-id");
    let choosenBoxValue = chooseBox.options[chooseBox.selectedIndex].text;

    function isCurrentYear(date){
        let thisMonth = parseInt(date.split("-")[1]);
        let thisYear = parseInt(date.split("-")[0]);

        let currYear = parseInt(currentDate.split("-")[0]);
        let currMonth= parseInt(currentDate.split("-")[1]);

        if ((currYear > thisYear) || ((currYear === thisYear) && (currMonth>= thisMonth)  )){
            return true
        }
        return false


    }

    runAtStart();


</script>
</body>
</html>